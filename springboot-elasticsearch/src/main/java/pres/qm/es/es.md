
# elasticsearch

    面向文档 
    
> db    es（一切皆json）

    数据库表        索引
    表               types (7.0慢慢弃用)
    行               文档
    字段              字段
    
**物理设置**

    在后台把每个索引划分成分片， 分片可以在不同服务器迁移
    
    集群默认名称 : elasticsearch
    
- 一个包含多个文档
- 一篇文档包含自文档， 就是json段 
- 自我包含 ， 文档同时包含字段和对应的值，即：key：value
- 结构灵活， 可以忽略或者动态的添加

**类型有时候也称为映射类型**

    name String text
    date....
    类型映射 (类似 自动推断)
    
    
> 索引

    db
    
    默认创建 五个分片
    
    一个分片就是一个lucene 索引
    一个包含 倒排索引 的文件目录
    
    倒排索引 结构使得es在不扫描全部文档下 就可以找到特定关键字
    
> 倒排索引

    采用lucene 倒排索引作为底层
    
    创建：
    
    将每个文档拆分成独立的词（词条 ， tokens）
    然后创建所有词条所有不重复的排序列表
    然后列出所在文档
    
    查找词条时， 按照权重（score） 取
    
    
    查找字典只找到有关文档即可
    
## 一个 es索引包含多个 lucene 倒排索引

    
    
## ik 分词器

    把一段 中文或者英文 分成一个个的词（关键字）
    
    然后进行匹配操作
    
> 中文分词器 ik分词器

    分词算法
    ik_smark    最少切分 
    ik_max_word 最细粒度划分
    
    
    
## restful 风格

    示例：
   
    不同分词器 效果：
    
```
// 自动识别词
// 没有重复词

GET _analyze
{
    "analyzer": "ik_smart",
    "text": "文本"
}

// 穷尽词库
GET _analyze
{
    "analyzer": "ik_max_word",
    "text": "文本"
}

```


